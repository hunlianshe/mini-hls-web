"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Api = require("../../service/api.service");
const zxList_1 = require("../../public/json/zxList");
const dataList = [];
zxList_1.default.data.forEach((e) => {
    dataList.push(e.ch);
});
Page({
    data: {
        dataIndex: 0,
        fortuneName: '',
        fortuneData: {},
        xzList: dataList,
        date: '今日'
    },
    onLoad: function (options) {
        console.log('options', options);
        options.type;
        this.setData({
            fortuneName: options.consName,
            date: options.type === 'today' ? '今日' : '本月',
        });
        this.getFortune(options.consName, options.type);
    },
    otherPick: function (e) {
        this.setData({
            fortuneName: dataList[e.detail.value],
        });
        this.getFortune(this.data.fortuneName);
    },
    getFortune(consNamem, type = 'month') {
        Api.getHoroscopet(consNamem, type).then((result) => {
            console.log('result.data', result.data);
            let fortuneData = result.data;
            fortuneData.summary = fortuneData.summary || result.data.love;
            this.setData({
                fortuneData,
            });
        });
    },
    onReady: function () {
    },
    onShow: function () {
    },
    onHide: function () {
    },
    onUnload: function () {
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhbFh6eXNEZXRhaWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZWFsWHp5c0RldGFpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlEQUFpRDtBQUNqRCxxREFBOEM7QUFFOUMsTUFBTSxRQUFRLEdBQVUsRUFBRSxDQUFDO0FBQzNCLGdCQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFO0lBQzdCLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3RCLENBQUMsQ0FBQyxDQUFDO0FBR0gsSUFBSSxDQUFDO0lBQ0gsSUFBSSxFQUFFO1FBQ0osU0FBUyxFQUFFLENBQUM7UUFDWixXQUFXLEVBQUUsRUFBRTtRQUNmLFdBQVcsRUFBRSxFQUFFO1FBQ2YsTUFBTSxFQUFFLFFBQVE7UUFDaEIsSUFBSSxFQUFDLElBQUk7S0FFVjtJQUVELE1BQU0sRUFBRSxVQUFVLE9BQVk7UUFDNUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUMsT0FBTyxDQUFDLENBQUE7UUFDOUIsT0FBTyxDQUFDLElBQUksQ0FBQTtRQUNaLElBQUksQ0FBQyxPQUFRLENBQUM7WUFDWixXQUFXLEVBQUUsT0FBTyxDQUFDLFFBQVE7WUFDN0IsSUFBSSxFQUFHLE9BQU8sQ0FBQyxJQUFJLEtBQUssT0FBTyxDQUFBLENBQUMsQ0FBQSxJQUFJLENBQUEsQ0FBQyxDQUFBLElBQUk7U0FDMUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNoRCxDQUFDO0lBRUQsU0FBUyxFQUFFLFVBQVUsQ0FBTTtRQUN6QixJQUFJLENBQUMsT0FBUSxDQUFDO1lBQ1osV0FBVyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztTQUN0QyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUdELFVBQVUsQ0FBQyxTQUFpQixFQUFDLElBQUksR0FBQyxPQUFPO1FBQ3ZDLEdBQUcsQ0FBQyxhQUFhLENBQUMsU0FBUyxFQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQVcsRUFBRSxFQUFFO1lBQ3JELE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUN2QyxJQUFJLFdBQVcsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO1lBQzlCLFdBQVcsQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDLE9BQU8sSUFBSyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQTtZQUM5RCxJQUFJLENBQUMsT0FBUSxDQUFDO2dCQUNaLFdBQVc7YUFDWixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxPQUFPLEVBQUU7SUFFVCxDQUFDO0lBS0QsTUFBTSxFQUFFO0lBRVIsQ0FBQztJQUtELE1BQU0sRUFBRTtJQUVSLENBQUM7SUFLRCxRQUFRLEVBQUU7SUFFVixDQUFDO0NBRUYsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQXBpIGZyb20gJy4uLy4uL3NlcnZpY2UvYXBpLnNlcnZpY2UnO1xuaW1wb3J0IHh6TGlzdCBmcm9tICcuLi8uLi9wdWJsaWMvanNvbi96eExpc3QnO1xuXG5jb25zdCBkYXRhTGlzdDogYW55W10gPSBbXTtcbnh6TGlzdC5kYXRhLmZvckVhY2goKGU6IGFueSkgPT4ge1xuICBkYXRhTGlzdC5wdXNoKGUuY2gpO1xufSk7XG5cblxuUGFnZSh7XG4gIGRhdGE6IHtcbiAgICBkYXRhSW5kZXg6IDAsXG4gICAgZm9ydHVuZU5hbWU6ICcnLFxuICAgIGZvcnR1bmVEYXRhOiB7fSxcbiAgICB4ekxpc3Q6IGRhdGFMaXN0LFxuICAgIGRhdGU6J+S7iuaXpSdcblxuICB9LFxuXG4gIG9uTG9hZDogZnVuY3Rpb24gKG9wdGlvbnM6IGFueSkge1xuICAgIGNvbnNvbGUubG9nKCdvcHRpb25zJyxvcHRpb25zKVxuICAgIG9wdGlvbnMudHlwZVxuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgZm9ydHVuZU5hbWU6IG9wdGlvbnMuY29uc05hbWUsXG4gICAgICBkYXRlOiAgb3B0aW9ucy50eXBlID09PSAndG9kYXknPyfku4rml6UnOifmnKzmnIgnLFxuICAgIH0pO1xuICAgIHRoaXMuZ2V0Rm9ydHVuZShvcHRpb25zLmNvbnNOYW1lLG9wdGlvbnMudHlwZSkgXG4gIH0sXG5cbiAgb3RoZXJQaWNrOiBmdW5jdGlvbiAoZTogYW55KSB7XG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBmb3J0dW5lTmFtZTogZGF0YUxpc3RbZS5kZXRhaWwudmFsdWVdLFxuICAgIH0pO1xuICAgIHRoaXMuZ2V0Rm9ydHVuZSh0aGlzLmRhdGEuZm9ydHVuZU5hbWUpO1xuICB9LFxuXG4gIC8qKiDojrflj5blrp7ml7bmmJ/luqfov5Dlir8gKi9cbiAgZ2V0Rm9ydHVuZShjb25zTmFtZW06IHN0cmluZyx0eXBlPSdtb250aCcpIHtcbiAgICBBcGkuZ2V0SG9yb3Njb3BldChjb25zTmFtZW0sdHlwZSkudGhlbigocmVzdWx0OiBhbnkpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHQuZGF0YScsIHJlc3VsdC5kYXRhKVxuICAgICAgbGV0IGZvcnR1bmVEYXRhID0gcmVzdWx0LmRhdGE7XG4gICAgICBmb3J0dW5lRGF0YS5zdW1tYXJ5ID0gZm9ydHVuZURhdGEuc3VtbWFyeSB8fCAgcmVzdWx0LmRhdGEubG92ZVxuICAgICAgdGhpcy5zZXREYXRhISh7XG4gICAgICAgIGZvcnR1bmVEYXRhLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgb25SZWFkeTogZnVuY3Rpb24gKCkge1xuXG4gIH0sXG5cbiAgLyoqXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5pi+56S6XG4gICAqL1xuICBvblNob3c6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdoumakOiXj1xuICAgKi9cbiAgb25IaWRlOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLljbjovb1cbiAgICovXG4gIG9uVW5sb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxufSkiXX0=