"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const apiServicePro = require("../../service/api.service");
const oss_1 = require("../../utils/oss");
const config_1 = require("../../config");
const utils = require("../../utils/utils");
Page({
    data: {
        user: { openid: '' },
        carId: '',
        shopId: '',
        brand: '',
        brandDetail: '',
        price: '',
        birthday: '',
        height: '',
        transfersNumber: '',
        isMarriage: '未婚',
        sex: '',
        education: '',
        hasChild: '',
        wantChild: '',
        job: '',
        house: '',
        sexIndex: 0,
        note: '',
        leftLenth: 300,
        indexImage: '',
        uploadIndexPath: '',
        oldImages: [],
        uploadImgs: [],
        count: 9,
        city: '',
        selectValue: '',
        cityList: [],
        hotCityList: [],
        popHidden: true,
        brandList: [],
        hotBrandList: [],
        dateNow: '',
        popHiddenBrand: true,
        submitDisable: false,
        isMarriageArray: ['未婚', '离异'],
        sexArray: ['男', '女'],
        salaryArray: [
            '5千以下', '5千～1万', '1万～2万', '2万～5万', '5万以上'
        ],
        educationArray: [
            '小学', '初中', '高中', '大专', '大学本科', '硕士', '博士'
        ],
        hasChildArray: ['是', '否'],
        wantChildArray: ['是', '否'],
        houseArray: ['已买', '未买'],
    },
    onLoad: function (options) {
        let _this = this;
        wx.getStorage({
            key: 'user',
            success: function (res) {
                _this.setData({
                    user: res.data
                });
            },
        });
        if (options.carId) {
            _this.getCarDetail(options.carId);
        }
        _this.setData({
            shopId: options.shopId,
            carId: options.carId || ''
        });
        this.setData({
            dateNow: this.getYMD(new Date())
        });
    },
    getCarDetail(id) {
        apiServicePro.getUserDetail(id).then((result) => {
            const { isMarriageArray } = this.data;
            if (result) {
                this.setData({
                    brand: result.data.brand,
                    brandDetail: result.data.brandDetail,
                    city: result.data.city,
                    price: result.data.price,
                    birthday: this.getYMD(result.data.birthday),
                    height: result.data.height,
                    transfersNumber: result.data.transfersNumber,
                    isMarriageValue: isMarriageArray[result.data.isMarriage].value,
                    isMarriage: result.data.isMarriage,
                    education: result.data.education,
                    sex: result.data.sex,
                    note: result.data.note,
                    indexImage: result.data.indexImage,
                    oldImages: result.data.images,
                });
            }
        });
    },
    getYMD(dateStr) {
        const date = new Date(dateStr);
        const year = date.getFullYear();
        let month = date.getMonth() + 1;
        let monthStr = month <= 9 ? `0${month}` : month;
        let day = date.getDate();
        let dayStr = day <= 9 ? `0${day}` : day;
        return `${year}-${monthStr}-${dayStr}`;
    },
    onSubmit(e) {
        let that = this;
        const value = e.detail.value;
        const openid = this.data.user.openid;
        const aliyunServerURL = config_1.default.uploadImageUrl;
        if (!utils.validateEmpty(value.brand, '请选择品牌车系') ||
            !utils.validateEmpty(value.birthday, '请选择上牌日期') ||
            !utils.validateEmpty(value.height, '请输入行驶里程') ||
            !utils.validateEmpty(value.city, '请输选择牌照所在地') ||
            !utils.validateEmpty(value.price, '请输入价格') ||
            !utils.validateEmpty(value.transfersNumber, '请输入过户次数') ||
            !utils.validateEmpty(value.sex, '请选择车况') ||
            !utils.validateEmpty(this.data.indexImage, '请上传汽车首页照片') ||
            !utils.validateImages(this.data.oldImages.concat(this.data.uploadImgs), '请上传汽车照片')) {
            return false;
        }
        let indexImage = this.data.indexImage;
        let uploadIndexPath = this.data.uploadIndexPath;
        if (uploadIndexPath !== '') {
            oss_1.default({
                filePath: indexImage,
                dir: `images/shop/${openid}/` + indexImage.replace('http://tmp/', ''),
                success: function (res) {
                    indexImage = `${aliyunServerURL}/${res}`;
                    that.uploadAndSubmit(e, indexImage);
                },
                fail: function () {
                    that.uploadAndSubmit(e, indexImage);
                }
            });
        }
        else {
            that.uploadAndSubmit(e, indexImage);
        }
    },
    uploadAndSubmit(e, indexImage) {
        const openid = this.data.user.openid;
        const aliyunServerURL = config_1.default.uploadImageUrl;
        let that = this;
        let count = 0;
        let images = [];
        const uploadImgs = this.data.uploadImgs;
        wx.showLoading({
            title: '',
        });
        if (uploadImgs.length > 0) {
            for (let i = 0; i < uploadImgs.length; i++) {
                let filePath = uploadImgs[i];
                oss_1.default({
                    filePath: filePath,
                    dir: `images/shop/${openid}/` + filePath.replace('http://tmp/', ''),
                    success: function (res) {
                        count++;
                        images.push(`${aliyunServerURL}/${res}`);
                        if (count === uploadImgs.length) {
                            if (that.data.carId !== '') {
                                images = images.concat(that.data.oldImages);
                                that.updateCar(e, indexImage, images, that.data.carId);
                            }
                            else {
                                that.doSubmit(e, indexImage, images);
                            }
                        }
                        else {
                        }
                    },
                    fail: function () {
                        wx.hideLoading();
                    }
                });
            }
        }
        else {
            if (that.data.carId !== '') {
                images = images.concat(that.data.oldImages);
                that.updateCar(e, indexImage, images, that.data.carId);
            }
            else {
                that.doSubmit(e, indexImage, images);
            }
            wx.hideLoading();
        }
    },
    doSubmit(e, indexImage, images) {
        const params = e.detail.value;
        this.setData({
            submitDisable: true
        });
        apiServicePro.register(Object.assign({ images, indexImage }, params)).then((result) => {
            wx.hideLoading();
            this.setData({
                submitDisable: true
            });
            if (result.code === 200) {
                wx.navigateTo({
                    url: `../carDetail/carDetail?id=${result.data.id}&from=creatCarPage`,
                });
            }
            else if (result.code === 1202) {
                utils.showModal('信息校验不通过，请核对汽车信息');
            }
            else {
                utils.showModal();
            }
        });
    },
    updateCar(e, indexImage, images, carId) {
        const value = e.detail.value;
        const params = Object.assign(value, { 'id': carId });
        this.setData({
            submitDisable: true
        });
        apiServicePro.updateUser(Object.assign({ images, indexImage }, params)).then((result) => {
            wx.hideLoading();
            this.setData({
                submitDisable: true
            });
            if (result.code === 200) {
                wx.navigateTo({
                    url: `../carDetail/carDetail?id=${result.data.id}&from=creatCarPage`,
                });
            }
            else if (result.code === 1202) {
                utils.showModal('信息校验不通过，请核对汽车信息');
            }
            else {
                utils.showModal();
            }
        });
    },
    delImage(e) {
        const array = e.currentTarget.dataset.array;
        const index = e.currentTarget.dataset.index;
        if (array === 'oldImages') {
            const oldImages = this.data.oldImages;
            oldImages.splice(index, 1);
            this.setData({
                oldImages
            });
        }
        else {
            const uploadImgs = this.data.uploadImgs;
            uploadImgs.splice(index, 1);
            this.setData({
                uploadImgs
            });
        }
    },
    chooseIndexImage() {
        this.chooseImage(1, 'one');
    },
    chooseOtherImage(e) {
        const selectPictureNum = e.target.dataset.num;
        let count = 99 - selectPictureNum;
        this.chooseImage(count, 'multi');
    },
    chooseImage(count, type) {
        const that = this;
        wx.chooseImage({
            count: count,
            sizeType: ['original', 'compressed'],
            sourceType: ['album', 'camera'],
            success: function (res) {
                let uploadImgs = that.data.uploadImgs;
                if (type === 'multi') {
                    that.setData({
                        uploadImgs: uploadImgs.concat(res.tempFilePaths),
                    });
                }
                else {
                    that.setData({
                        uploadIndexPath: res.tempFilePaths[0],
                        indexImage: res.tempFilePaths[0],
                    });
                }
            },
        });
    },
    popPicker() {
        let popHidden = this.data.popHidden;
        this.setData({
            popHidden: !popHidden,
        });
    },
    doSelect(e) {
        if (e.detail.name) {
            this.setData({
                popHidden: true,
                city: e.detail.name,
            });
            wx.setStorage({
                key: 'city',
                data: e.detail.name,
            });
        }
        else {
            this.setData({
                popHidden: true,
            });
        }
    },
    popBrand() {
        let popHiddenBrand = this.data.popHiddenBrand;
        this.setData({
            popHiddenBrand: !popHiddenBrand,
        });
    },
    doSelectBrand(e) {
        if (e.detail.brand) {
            this.setData({
                popHiddenBrand: true,
                brand: e.detail.brand,
                brandDetail: e.detail.brandDetail,
            });
            wx.setStorage({
                key: 'brand',
                data: e.detail.brand,
            });
        }
        else {
            this.setData({
                popHiddenBrand: true,
            });
        }
    },
    bindDateChange(e) {
        this.setData({
            birthday: e.detail.value
        });
    },
    bindEducationChange(e) {
        const { educationArray } = this.data;
        this.setData({
            education: educationArray[e.detail.value]
        });
    },
    bindMarriageChange(e) {
        const { isMarriageArray } = this.data;
        this.setData({
            isMarriage: isMarriageArray[e.detail.value]
        });
    },
    bindHasChildChange(e) {
        const { hasChildArray } = this.data;
        this.setData({
            hasChild: hasChildArray[e.detail.value]
        });
    },
    bindWantChildChange(e) {
        const { wantChildArray } = this.data;
        this.setData({
            hasChild: wantChildArray[e.detail.value]
        });
    },
    bindHouseChange(e) {
        const { houseArray } = this.data;
        this.setData({
            house: houseArray[e.detail.value]
        });
    },
    bindSexChange(e) {
        const { sexArray } = this.data;
        this.setData({
            sex: sexArray[e.detail.value]
        });
    },
    bindSalaryChange(e) {
        const { salaryArray } = this.data;
        this.setData({
            salary: salaryArray[e.detail.value]
        });
    },
    inputNote(e) {
        const leftLenth = (300 - e.detail.value.length);
        this.setData({
            leftLenth: leftLenth > 0 ? leftLenth : 0
        });
    },
    onReady: function () {
    },
    onShow: function () {
    },
    onHide: function () {
    },
    onUnload: function () {
    },
    onPullDownRefresh: function () {
    },
    onReachBottom: function () {
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaXN0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZWdpc3Rlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLDJEQUEyRDtBQUMzRCx5Q0FBMkM7QUFDM0MseUNBQStCO0FBQy9CLDJDQUEyQztBQUUzQyxJQUFJLENBQUM7SUFDSCxJQUFJLEVBQUU7UUFDSixJQUFJLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFO1FBQ3BCLEtBQUssRUFBRSxFQUFFO1FBQ1QsTUFBTSxFQUFFLEVBQUU7UUFDVixLQUFLLEVBQUUsRUFBRTtRQUNULFdBQVcsRUFBRSxFQUFFO1FBQ2YsS0FBSyxFQUFFLEVBQUU7UUFDVCxRQUFRLEVBQUUsRUFBRTtRQUNaLE1BQU0sRUFBRSxFQUFFO1FBQ1YsZUFBZSxFQUFFLEVBQUU7UUFDbkIsVUFBVSxFQUFFLElBQUk7UUFDaEIsR0FBRyxFQUFFLEVBQUU7UUFDUCxTQUFTLEVBQUUsRUFBRTtRQUNiLFFBQVEsRUFBRSxFQUFFO1FBQ1osU0FBUyxFQUFFLEVBQUU7UUFDYixHQUFHLEVBQUUsRUFBRTtRQUNQLEtBQUssRUFBRSxFQUFFO1FBQ1QsUUFBUSxFQUFFLENBQUM7UUFDWCxJQUFJLEVBQUUsRUFBRTtRQUNSLFNBQVMsRUFBRSxHQUFHO1FBQ2QsVUFBVSxFQUFFLEVBQUU7UUFDZCxlQUFlLEVBQUUsRUFBRTtRQUNuQixTQUFTLEVBQUUsRUFBRTtRQUNiLFVBQVUsRUFBRSxFQUFFO1FBQ2QsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLEVBQUUsRUFBRTtRQUVSLFdBQVcsRUFBRSxFQUFFO1FBQ2YsUUFBUSxFQUFFLEVBQUU7UUFDWixXQUFXLEVBQUUsRUFBRTtRQUNmLFNBQVMsRUFBRSxJQUFJO1FBQ2YsU0FBUyxFQUFFLEVBQUU7UUFDYixZQUFZLEVBQUUsRUFBRTtRQUNoQixPQUFPLEVBQUUsRUFBRTtRQUNYLGNBQWMsRUFBRSxJQUFJO1FBQ3BCLGFBQWEsRUFBRSxLQUFLO1FBQ3BCLGVBQWUs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ci9jcmVhdGVDYXIuanNcbmltcG9ydCAqIGFzIGFwaVNlcnZpY2VQcm8gZnJvbSAnLi4vLi4vc2VydmljZS9hcGkuc2VydmljZSc7XG5pbXBvcnQgdXBsb2FkSW1hZ2UgIGZyb20gJy4uLy4uL3V0aWxzL29zcyc7XG5pbXBvcnQgZW52IGZyb20gJy4uLy4uL2NvbmZpZyc7XG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XG5cblBhZ2Uoe1xuICBkYXRhOiB7XG4gICAgdXNlcjogeyBvcGVuaWQ6ICcnIH0sXG4gICAgY2FySWQ6ICcnLFxuICAgIHNob3BJZDogJycsXG4gICAgYnJhbmQ6ICcnLCAgICAgICAgICAgIC8vIOWTgeeJjFxuICAgIGJyYW5kRGV0YWlsOiAnJywgICAgICAvLyDkuoznuqfovabns7tcbiAgICBwcmljZTogJycsICAgICAgICAgICAgLy8g5Lu35qC8XG4gICAgYmlydGhkYXk6ICcnLCAgICAgICAgIC8vIOS4iueJjOaXtumXtFxuICAgIGhlaWdodDogJycsICAgICAgICAvLyDooYzpqbbph4znqItcbiAgICB0cmFuc2ZlcnNOdW1iZXI6ICcnLCAgLy8g6L+H5oi35qyh5pWwXG4gICAgaXNNYXJyaWFnZTogJ+acquWpmicsXG4gICAgc2V4OiAnJywgXG4gICAgZWR1Y2F0aW9uOiAnJywgXG4gICAgaGFzQ2hpbGQ6ICcnLCBcbiAgICB3YW50Q2hpbGQ6ICcnLCBcbiAgICBqb2I6ICcnLFxuICAgIGhvdXNlOiAnJywgICBcbiAgICBzZXhJbmRleDogMCxcbiAgICBub3RlOiAnJyxcbiAgICBsZWZ0TGVudGg6IDMwMCxcbiAgICBpbmRleEltYWdlOiAnJyxcbiAgICB1cGxvYWRJbmRleFBhdGg6ICcnLFxuICAgIG9sZEltYWdlczogW10sICAgICAgICAvLyDmm7TmlrDmsb3ovablm77niYdcbiAgICB1cGxvYWRJbWdzOiBbXSwgICAgICAgLy8g5Zu+54mHXG4gICAgY291bnQ6IDksXG4gICAgY2l0eTogJycsICAgICAgICAgICAgIC8vIOS4iueJjOWcsOeCuVxuICAgIC8vIGNpdHlJZDogJycsXG4gICAgc2VsZWN0VmFsdWU6ICcnLFxuICAgIGNpdHlMaXN0OiBbXSxcbiAgICBob3RDaXR5TGlzdDogW10sXG4gICAgcG9wSGlkZGVuOiB0cnVlLFxuICAgIGJyYW5kTGlzdDogW10sXG4gICAgaG90QnJhbmRMaXN0OiBbXSxcbiAgICBkYXRlTm93OiAnJyxcbiAgICBwb3BIaWRkZW5CcmFuZDogdHJ1ZSxcbiAgICBzdWJtaXREaXNhYmxlOiBmYWxzZSxcbiAgICBpc01hcnJpYWdlQXJyYXk6IFsn5pyq5amaJywgJ+emu+W8giddLFxuICAgIHNleEFycmF5OiBbJ+eUtycsJ+WlsyddLFxuICAgIHNhbGFyeUFycmF5OiBbXG4gICAgICAnNeWNg+S7peS4iycsICc15Y2D772eMeS4hycsICcx5LiH772eMuS4hycsICcy5LiH772eNeS4hycsICc15LiH5Lul5LiKJ1xuICAgIF0sXG4gICAgZWR1Y2F0aW9uQXJyYXk6IFtcbiAgICAgICflsI/lraYnLCAn5Yid5LitJywgJ+mrmOS4rScsICflpKfkuJMnLCAn5aSn5a2m5pys56eRJywgJ+ehleWjqycsICfljZrlo6snXG4gICAgXSxcbiAgICBoYXNDaGlsZEFycmF5OiBbJ+aYrycsICflkKYnXSxcbiAgICB3YW50Q2hpbGRBcnJheTogWyfmmK8nLCAn5ZCmJ10sXG4gICAgaG91c2VBcnJheTogWyflt7LkubAnLCAn5pyq5LmwJ10sXG4gIH0sXG5cbiAgLyoqXG4gICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLliqDovb1cbiAgKi9cbiAgb25Mb2FkOiBmdW5jdGlvbiAob3B0aW9uczogYW55KSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcbiAgICB3eC5nZXRTdG9yYWdlKHtcbiAgICAgIGtleTogJ3VzZXInLFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICBfdGhpcy5zZXREYXRhISh7XG4gICAgICAgICAgdXNlcjogcmVzLmRhdGFcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgfSk7ICBcbiAgICBpZiAob3B0aW9ucy5jYXJJZCkge1xuICAgICAgX3RoaXMuZ2V0Q2FyRGV0YWlsKG9wdGlvbnMuY2FySWQpO1xuICAgIH1cbiAgICBfdGhpcy5zZXREYXRhISh7XG4gICAgICBzaG9wSWQ6IG9wdGlvbnMuc2hvcElkLFxuICAgICAgY2FySWQ6IG9wdGlvbnMuY2FySWQgfHwgJydcbiAgICB9KTtcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIGRhdGVOb3c6IHRoaXMuZ2V0WU1EKG5ldyBEYXRlKCkpXG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqIOaxvei9puivpuaDhSAqL1xuICBnZXRDYXJEZXRhaWwoaWQ6IGFueSkge1xuICAgIGFwaVNlcnZpY2VQcm8uZ2V0VXNlckRldGFpbChpZCkudGhlbigocmVzdWx0OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHsgaXNNYXJyaWFnZUFycmF5IH0gPSB0aGlzLmRhdGFcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgdGhpcy5zZXREYXRhISh7XG4gICAgICAgICAgYnJhbmQ6IHJlc3VsdC5kYXRhLmJyYW5kLFxuICAgICAgICAgIGJyYW5kRGV0YWlsOiByZXN1bHQuZGF0YS5icmFuZERldGFpbCwgICAgICAgICAvLyDkuoznuqfovabns7tcbiAgICAgICAgICBjaXR5OiByZXN1bHQuZGF0YS5jaXR5LFxuICAgICAgICAgIHByaWNlOiByZXN1bHQuZGF0YS5wcmljZSwgICAgICAgICAgICAgICAgICAgICAvLyDku7fmoLxcbiAgICAgICAgICBiaXJ0aGRheTogdGhpcy5nZXRZTUQocmVzdWx0LmRhdGEuYmlydGhkYXkpLCAgLy8g5LiK54mM5pe26Ze0XG4gICAgICAgICAgaGVpZ2h0OiByZXN1bHQuZGF0YS5oZWlnaHQsICAgICAgICAgICAgIC8vIOihjOmptumHjOeoi1xuICAgICAgICAgIHRyYW5zZmVyc051bWJlcjogcmVzdWx0LmRhdGEudHJhbnNmZXJzTnVtYmVyLCAvLyDov4fmiLfmrKHmlbBcbiAgICAgICAgICBpc01hcnJpYWdlVmFsdWU6IGlzTWFycmlhZ2VBcnJheVtyZXN1bHQuZGF0YS5pc01hcnJpYWdlXS52YWx1ZSxcbiAgICAgICAgICBpc01hcnJpYWdlOiByZXN1bHQuZGF0YS5pc01hcnJpYWdlLFxuICAgICAgICAgIGVkdWNhdGlvbjogcmVzdWx0LmRhdGEuZWR1Y2F0aW9uLFxuICAgICAgICAgIHNleDogcmVzdWx0LmRhdGEuc2V4LCAgICAgICAgICAgICAvLyDovablhrVcbiAgICAgICAgICBub3RlOiByZXN1bHQuZGF0YS5ub3RlLCAgICAgICAgICAgICAgICAgICAgICAgLy8g6KGl5YWFXG4gICAgICAgICAgaW5kZXhJbWFnZTogcmVzdWx0LmRhdGEuaW5kZXhJbWFnZSxcbiAgICAgICAgICBvbGRJbWFnZXM6IHJlc3VsdC5kYXRhLmltYWdlcywgICAgICAgICAgICAgICAgLy8g5Zu+54mHXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICBnZXRZTUQoZGF0ZVN0cjogYW55KSB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgbGV0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICBsZXQgbW9udGhTdHIgPSBtb250aCA8PSA5ID8gYDAke21vbnRofWAgOiBtb250aDtcbiAgICBsZXQgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgbGV0IGRheVN0ciA9IGRheSA8PSA5ID8gYDAke2RheX1gIDogZGF5O1xuICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRoU3RyfS0ke2RheVN0cn1gXG4gIH0sXG5cbiAgLyoqIOWHhuWkh+aPkOS6pCAqL1xuICBvblN1Ym1pdChlOiBhbnkpOiBhbnkge1xuICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICBjb25zdCB2YWx1ZSA9IGUuZGV0YWlsLnZhbHVlO1xuICAgIGNvbnN0IG9wZW5pZCA9IHRoaXMuZGF0YS51c2VyLm9wZW5pZDtcbiAgICBjb25zdCBhbGl5dW5TZXJ2ZXJVUkwgPSBlbnYudXBsb2FkSW1hZ2VVcmw7XG5cbiAgICBpZiAoIXV0aWxzLnZhbGlkYXRlRW1wdHkodmFsdWUuYnJhbmQsICfor7fpgInmi6nlk4HniYzovabns7snKSB8fFxuICAgICAgICAhdXRpbHMudmFsaWRhdGVFbXB0eSh2YWx1ZS5iaXJ0aGRheSwgJ+ivt+mAieaLqeS4iueJjOaXpeacnycpIHx8XG4gICAgICAgICF1dGlscy52YWxpZGF0ZUVtcHR5KHZhbHVlLmhlaWdodCwgJ+ivt+i+k+WFpeihjOmptumHjOeoiycpIHx8XG4gICAgICAgICF1dGlscy52YWxpZGF0ZUVtcHR5KHZhbHVlLmNpdHksICfor7fovpPpgInmi6nniYznhafmiYDlnKjlnLAnKSB8fFxuICAgICAgICAhdXRpbHMudmFsaWRhdGVFbXB0eSh2YWx1ZS5wcmljZSwgJ+ivt+i+k+WFpeS7t+agvCcpIHx8XG4gICAgICAgICF1dGlscy52YWxpZGF0ZUVtcHR5KHZhbHVlLnRyYW5zZmVyc051bWJlciwgJ+ivt+i+k+WFpei/h+aIt+asoeaVsCcpIHx8XG4gICAgICAgICF1dGlscy52YWxpZGF0ZUVtcHR5KHZhbHVlLnNleCwgJ+ivt+mAieaLqei9puWGtScpIHx8XG4gICAgICAgICF1dGlscy52YWxpZGF0ZUVtcHR5KHRoaXMuZGF0YS5pbmRleEltYWdlLCAn6K+35LiK5Lyg5rG96L2m6aaW6aG154Wn54mHJykgfHxcbiAgICAgICAgIXV0aWxzLnZhbGlkYXRlSW1hZ2VzKHRoaXMuZGF0YS5vbGRJbWFnZXMuY29uY2F0KHRoaXMuZGF0YS51cGxvYWRJbWdzKSwgJ+ivt+S4iuS8oOaxvei9pueFp+eJhycpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IGluZGV4SW1hZ2UgPSB0aGlzLmRhdGEuaW5kZXhJbWFnZTtcbiAgICBsZXQgdXBsb2FkSW5kZXhQYXRoID0gdGhpcy5kYXRhLnVwbG9hZEluZGV4UGF0aDtcbiAgICBpZiAodXBsb2FkSW5kZXhQYXRoICE9PSAnJykge1xuICAgICAgdXBsb2FkSW1hZ2Uoe1xuICAgICAgICBmaWxlUGF0aDogaW5kZXhJbWFnZSxcbiAgICAgICAgZGlyOiBgaW1hZ2VzL3Nob3AvJHtvcGVuaWR9L2AgKyBpbmRleEltYWdlLnJlcGxhY2UoJ2h0dHA6Ly90bXAvJywgJycpLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzOiBhbnkpIHtcbiAgICAgICAgICBpbmRleEltYWdlID0gYCR7YWxpeXVuU2VydmVyVVJMfS8ke3Jlc31gO1xuICAgICAgICAgIHRoYXQudXBsb2FkQW5kU3VibWl0KGUsIGluZGV4SW1hZ2UpO1xuICAgICAgICB9LFxuICAgICAgICBmYWlsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhhdC51cGxvYWRBbmRTdWJtaXQoZSwgaW5kZXhJbWFnZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGF0LnVwbG9hZEFuZFN1Ym1pdChlLCBpbmRleEltYWdlKTtcbiAgICB9XG4gIH0sXG5cbiAgdXBsb2FkQW5kU3VibWl0KGU6IGFueSwgaW5kZXhJbWFnZTogYW55KSB7XG4gICAgY29uc3Qgb3BlbmlkID0gdGhpcy5kYXRhLnVzZXIub3BlbmlkO1xuICAgIGNvbnN0IGFsaXl1blNlcnZlclVSTCA9IGVudi51cGxvYWRJbWFnZVVybDtcbiAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBsZXQgaW1hZ2VzOiBhbnlbXSA9IFtdO1xuICAgIGNvbnN0IHVwbG9hZEltZ3MgPSB0aGlzLmRhdGEudXBsb2FkSW1ncztcbiAgICB3eC5zaG93TG9hZGluZyh7XG4gICAgICB0aXRsZTogJycsXG4gICAgfSlcbiAgICBpZiAodXBsb2FkSW1ncy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVwbG9hZEltZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGZpbGVQYXRoOiBhbnkgPSB1cGxvYWRJbWdzW2ldO1xuICAgICAgICB1cGxvYWRJbWFnZSh7XG4gICAgICAgICAgZmlsZVBhdGg6IGZpbGVQYXRoLFxuICAgICAgICAgIGRpcjogYGltYWdlcy9zaG9wLyR7b3BlbmlkfS9gICsgZmlsZVBhdGgucmVwbGFjZSgnaHR0cDovL3RtcC8nLCAnJyksXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlczogYW55KSB7XG4gICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgaW1hZ2VzLnB1c2goYCR7YWxpeXVuU2VydmVyVVJMfS8ke3Jlc31gKTtcbiAgICAgICAgICAgIGlmIChjb3VudCA9PT0gdXBsb2FkSW1ncy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgaWYgKHRoYXQuZGF0YS5jYXJJZCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBpbWFnZXMgPSBpbWFnZXMuY29uY2F0KHRoYXQuZGF0YS5vbGRJbWFnZXMpO1xuICAgICAgICAgICAgICAgIHRoYXQudXBkYXRlQ2FyKGUsIGluZGV4SW1hZ2UsIGltYWdlcywgdGhhdC5kYXRhLmNhcklkKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGF0LmRvU3VibWl0KGUsIGluZGV4SW1hZ2UsIGltYWdlcyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIHd4LmhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3eC5oaWRlTG9hZGluZygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGF0LmRhdGEuY2FySWQgIT09ICcnKSB7XG4gICAgICAgIGltYWdlcyA9IGltYWdlcy5jb25jYXQodGhhdC5kYXRhLm9sZEltYWdlcyk7ICAvLyDlkIjlubbnvJbovpHkuYvliY3nmoTmsb3ovablm77niYdcbiAgICAgICAgdGhhdC51cGRhdGVDYXIoZSwgaW5kZXhJbWFnZSwgaW1hZ2VzLCB0aGF0LmRhdGEuY2FySWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhhdC5kb1N1Ym1pdChlLCBpbmRleEltYWdlLCBpbWFnZXMpO1xuICAgICAgfVxuICAgICAgd3guaGlkZUxvYWRpbmcoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqIOWIm+W7uuaxvei9piAqL1xuICBkb1N1Ym1pdChlOiBhbnksIGluZGV4SW1hZ2U6IGFueSwgaW1hZ2VzOiBhbnkpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBlLmRldGFpbC52YWx1ZTtcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIHN1Ym1pdERpc2FibGU6IHRydWVcbiAgICB9KTtcbiAgICBhcGlTZXJ2aWNlUHJvLnJlZ2lzdGVyKE9iamVjdC5hc3NpZ24oeyBpbWFnZXMsIGluZGV4SW1hZ2UgfSwgcGFyYW1zKSkudGhlbigocmVzdWx0OiBhbnkpID0+IHtcbiAgICAgIHd4LmhpZGVMb2FkaW5nKCk7IFxuICAgICAgdGhpcy5zZXREYXRhISh7XG4gICAgICAgIHN1Ym1pdERpc2FibGU6IHRydWVcbiAgICAgIH0pOyAgICAgXG4gICAgICBpZiAocmVzdWx0LmNvZGUgPT09IDIwMCkge1xuICAgICAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgICAgICB1cmw6IGAuLi9jYXJEZXRhaWwvY2FyRGV0YWlsP2lkPSR7cmVzdWx0LmRhdGEuaWR9JmZyb209Y3JlYXRDYXJQYWdlYCxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdC5jb2RlID09PSAxMjAyKSB7XG4gICAgICAgIHV0aWxzLnNob3dNb2RhbCgn5L+h5oGv5qCh6aqM5LiN6YCa6L+H77yM6K+35qC45a+55rG96L2m5L+h5oGvJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1dGlscy5zaG93TW9kYWwoKTtcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG4gIC8qKiDmm7TmlrDmsb3ovaYgKi9cbiAgdXBkYXRlQ2FyKGU6IGFueSwgaW5kZXhJbWFnZTogYW55LCBpbWFnZXM6IGFueSwgY2FySWQ6IGFueSkge1xuICAgIGNvbnN0IHZhbHVlID0gZS5kZXRhaWwudmFsdWU7XG4gICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmFzc2lnbih2YWx1ZSwgeydpZCc6IGNhcklkfSk7XG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBzdWJtaXREaXNhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgYXBpU2VydmljZVByby51cGRhdGVVc2VyKE9iamVjdC5hc3NpZ24oeyBpbWFnZXMsIGluZGV4SW1hZ2UgfSwgcGFyYW1zKSkudGhlbigocmVzdWx0OmFueSkgPT4ge1xuICAgICAgd3guaGlkZUxvYWRpbmcoKTtcbiAgICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgICBzdWJtaXREaXNhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIGlmIChyZXN1bHQuY29kZSA9PT0gMjAwKSB7XG4gICAgICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgICAgIHVybDogYC4uL2NhckRldGFpbC9jYXJEZXRhaWw/aWQ9JHtyZXN1bHQuZGF0YS5pZH0mZnJvbT1jcmVhdENhclBhZ2VgLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmNvZGUgPT09IDEyMDIpIHtcbiAgICAgICAgdXRpbHMuc2hvd01vZGFsKCfkv6Hmga/moKHpqozkuI3pgJrov4fvvIzor7fmoLjlr7nmsb3ovabkv6Hmga8nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHV0aWxzLnNob3dNb2RhbCgpO1xuICAgICAgfVxuICAgIH0pXG4gIH0sXG5cbiAgLyoqIOWIoOmZpOS4iuS8oOeFp+eJhyAqL1xuICBkZWxJbWFnZShlOiBhbnkpIHtcbiAgICBjb25zdCBhcnJheSA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmFycmF5O1xuICAgIGNvbnN0IGluZGV4ID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5kZXg7XG4gICAgaWYgKGFycmF5ID09PSAnb2xkSW1hZ2VzJykge1xuICAgICAgY29uc3Qgb2xkSW1hZ2VzID0gdGhpcy5kYXRhLm9sZEltYWdlcztcbiAgICAgIG9sZEltYWdlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgdGhpcy5zZXREYXRhISh7XG4gICAgICAgIG9sZEltYWdlc1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHVwbG9hZEltZ3MgPSB0aGlzLmRhdGEudXBsb2FkSW1ncztcbiAgICAgIHVwbG9hZEltZ3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgICB1cGxvYWRJbWdzXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgY2hvb3NlSW5kZXhJbWFnZSgpIHtcbiAgICB0aGlzLmNob29zZUltYWdlKDEsICdvbmUnKTtcbiAgfSxcblxuICBjaG9vc2VPdGhlckltYWdlKGU6IGFueSkge1xuICAgIGNvbnN0IHNlbGVjdFBpY3R1cmVOdW0gPSBlLnRhcmdldC5kYXRhc2V0Lm51bTtcbiAgICBsZXQgY291bnQgPSA5OSAtIHNlbGVjdFBpY3R1cmVOdW1cbiAgICB0aGlzLmNob29zZUltYWdlKGNvdW50LCAnbXVsdGknKTtcbiAgfSxcblxuICAvKiog6YCJ5oup5Zu+54mHXG4gICAqICBAdHlwZSBtdWx0aS3lpJrlvKDlm77niYcgb25lLeS4gOW8oOWbvueJh1xuICAgKi9cbiAgY2hvb3NlSW1hZ2UoY291bnQ6IGFueSwgdHlwZTogYW55KSB7XG4gICAgY29uc3QgdGhhdCA9IHRoaXM7XG4gICAgd3guY2hvb3NlSW1hZ2Uoe1xuICAgICAgY291bnQ6IGNvdW50LFxuICAgICAgc2l6ZVR5cGU6IFsnb3JpZ2luYWwnLCAnY29tcHJlc3NlZCddLCAvLyDlj6/ku6XmjIflrprmmK/ljp/lm77ov5jmmK/ljovnvKnlm77vvIzpu5jorqTkuozogIXpg73mnIlcbiAgICAgIHNvdXJjZVR5cGU6IFsnYWxidW0nLCAnY2FtZXJhJ10sIC8vIOWPr+S7peaMh+Wumuadpea6kOaYr+ebuOWGjOi/mOaYr+ebuOacuu+8jOm7mOiupOS6jOiAhemDveaciVxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlczogYW55KSB7XG4gICAgICAgIGxldCB1cGxvYWRJbWdzID0gdGhhdC5kYXRhLnVwbG9hZEltZ3M7XG4gICAgICAgIGlmICh0eXBlID09PSAnbXVsdGknKSB7XG4gICAgICAgICAgdGhhdC5zZXREYXRhISh7XG4gICAgICAgICAgICB1cGxvYWRJbWdzOiB1cGxvYWRJbWdzLmNvbmNhdChyZXMudGVtcEZpbGVQYXRocyksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhhdC5zZXREYXRhISh7XG4gICAgICAgICAgICB1cGxvYWRJbmRleFBhdGg6IHJlcy50ZW1wRmlsZVBhdGhzWzBdLFxuICAgICAgICAgICAgaW5kZXhJbWFnZTogcmVzLnRlbXBGaWxlUGF0aHNbMF0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSlcbiAgfSxcblxuICAvKiog5o6n5Yi2cGlja2VyQ2l0eSAqL1xuICBwb3BQaWNrZXIoKSB7XG4gICAgbGV0IHBvcEhpZGRlbiA9IHRoaXMuZGF0YS5wb3BIaWRkZW47XG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBwb3BIaWRkZW46ICFwb3BIaWRkZW4sXG4gICAgfSlcbiAgfSxcblxuICAvKiog6YCJ5oup5Z+O5biCICovXG4gIGRvU2VsZWN0KGU6IGFueSkge1xuICAgIGlmIChlLmRldGFpbC5uYW1lKSB7XG4gICAgICAvLyBjb25zdCBjaXR5SWQgPSB0aGlzLmdldENpdHlJZChlLmRldGFpbC5uYW1lKTtcbiAgICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgICBwb3BIaWRkZW46IHRydWUsXG4gICAgICAgIGNpdHk6IGUuZGV0YWlsLm5hbWUsXG4gICAgICAgIC8vIGNpdHlJZCxcbiAgICAgIH0pXG4gICAgICB3eC5zZXRTdG9yYWdlKHtcbiAgICAgICAga2V5OiAnY2l0eScsXG4gICAgICAgIGRhdGE6IGUuZGV0YWlsLm5hbWUsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgeyAgLy8g5Y+W5raI5oyJ6ZKuXG4gICAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgICAgcG9wSGlkZGVuOiB0cnVlLFxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cblxuICAvKiog5o6n5Yi2cGlja0JyYW5kICovXG4gIHBvcEJyYW5kKCkge1xuICAgIGxldCBwb3BIaWRkZW5CcmFuZCA9IHRoaXMuZGF0YS5wb3BIaWRkZW5CcmFuZDtcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIHBvcEhpZGRlbkJyYW5kOiAhcG9wSGlkZGVuQnJhbmQsXG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqIOmAieaLqeWfjuW4giAqL1xuICBkb1NlbGVjdEJyYW5kKGU6IGFueSkge1xuICAgIGlmIChlLmRldGFpbC5icmFuZCkge1xuICAgICAgdGhpcy5zZXREYXRhISh7XG4gICAgICAgIHBvcEhpZGRlbkJyYW5kOiB0cnVlLFxuICAgICAgICBicmFuZDogZS5kZXRhaWwuYnJhbmQsXG4gICAgICAgIGJyYW5kRGV0YWlsOiBlLmRldGFpbC5icmFuZERldGFpbCxcbiAgICAgIH0pO1xuICAgICAgd3guc2V0U3RvcmFnZSh7XG4gICAgICAgIGtleTogJ2JyYW5kJyxcbiAgICAgICAgZGF0YTogZS5kZXRhaWwuYnJhbmQsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgeyAgLy8g5Y+W5raI5oyJ6ZKuXG4gICAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgICAgcG9wSGlkZGVuQnJhbmQ6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqIOS4iueJjOaXtumXtCAqL1xuICBiaW5kRGF0ZUNoYW5nZShlOiBhbnkpIHtcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIGJpcnRoZGF5OiBlLmRldGFpbC52YWx1ZVxuICAgIH0pXG4gIH0sXG5cbiAgYmluZEVkdWNhdGlvbkNoYW5nZShlOiBhbnkpIHtcbiAgICBjb25zdCB7IGVkdWNhdGlvbkFycmF5IH0gPSB0aGlzLmRhdGFcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIGVkdWNhdGlvbjogZWR1Y2F0aW9uQXJyYXlbZS5kZXRhaWwudmFsdWVdXG4gICAgfSlcbiAgfSxcblxuICAvKiog5ama5ae7ICovXG4gIGJpbmRNYXJyaWFnZUNoYW5nZShlOiBhbnkpIHtcbiAgICBjb25zdCB7IGlzTWFycmlhZ2VBcnJheSB9ID0gdGhpcy5kYXRhXG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBpc01hcnJpYWdlOiBpc01hcnJpYWdlQXJyYXlbZS5kZXRhaWwudmFsdWVdXG4gICAgfSlcbiAgfSxcblxuICBiaW5kSGFzQ2hpbGRDaGFuZ2UoZTogYW55KSB7XG4gICAgY29uc3QgeyBoYXNDaGlsZEFycmF5IH0gPSB0aGlzLmRhdGFcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIGhhc0NoaWxkOiBoYXNDaGlsZEFycmF5W2UuZGV0YWlsLnZhbHVlXVxuICAgIH0pXG4gIH0sXG5cbiAgYmluZFdhbnRDaGlsZENoYW5nZShlOiBhbnkpIHtcbiAgICBjb25zdCB7IHdhbnRDaGlsZEFycmF5IH0gPSB0aGlzLmRhdGFcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIGhhc0NoaWxkOiB3YW50Q2hpbGRBcnJheVtlLmRldGFpbC52YWx1ZV1cbiAgICB9KVxuICB9LFxuXG4gIGJpbmRIb3VzZUNoYW5nZShlOiBhbnkpIHtcbiAgICBjb25zdCB7IGhvdXNlQXJyYXkgfSA9IHRoaXMuZGF0YVxuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgaG91c2U6IGhvdXNlQXJyYXlbZS5kZXRhaWwudmFsdWVdXG4gICAgfSlcbiAgfSxcblxuICAvKiog5oCn5YirICovXG4gIGJpbmRTZXhDaGFuZ2UoZTogYW55KSB7XG4gICAgY29uc3QgeyBzZXhBcnJheSB9ID0gdGhpcy5kYXRhXG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBzZXg6IHNleEFycmF5W2UuZGV0YWlsLnZhbHVlXVxuICAgIH0pXG4gIH0sXG4gIC8qKiDmnIjmlLblhaUgKi9cbiAgYmluZFNhbGFyeUNoYW5nZShlOiBhbnkpIHtcbiAgICBjb25zdCB7IHNhbGFyeUFycmF5IH0gPSB0aGlzLmRhdGFcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIHNhbGFyeTogc2FsYXJ5QXJyYXlbZS5kZXRhaWwudmFsdWVdXG4gICAgfSlcbiAgfSxcblxuICBpbnB1dE5vdGUoZTogYW55KSB7XG4gICAgY29uc3QgbGVmdExlbnRoID0gKDMwMCAtIGUuZGV0YWlsLnZhbHVlLmxlbmd0aCk7XG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBsZWZ0TGVudGg6IGxlZnRMZW50aCA+IDAgPyBsZWZ0TGVudGggOiAwXG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5Yid5qyh5riy5p+T5a6M5oiQXG4gICAqL1xuICBvblJlYWR5OiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLmmL7npLpcbiAgICovXG4gIG9uU2hvdzogZnVuY3Rpb24gKCkge1xuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdoumakOiXj1xuICAgKi9cbiAgb25IaWRlOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLljbjovb1cbiAgICovXG4gIG9uVW5sb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog6aG16Z2i55u45YWz5LqL5Lu25aSE55CG5Ye95pWwLS3nm5HlkKznlKjmiLfkuIvmi4nliqjkvZxcbiAgICovXG4gIG9uUHVsbERvd25SZWZyZXNoOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog6aG16Z2i5LiK5ouJ6Kem5bqV5LqL5Lu255qE5aSE55CG5Ye95pWwXG4gICAqL1xuICBvblJlYWNoQm90dG9tOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcbn0pIl19