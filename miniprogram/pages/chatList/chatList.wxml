<view class="chatList">
  <view style="background: #fff;">
    <view class="match-maker" bindtap="goMatchmaker">
      <image src="{{matcherImage}}" mode="aspectFit" />
    </view>
    <view style="margin-top: 140rpx">
      <block wx:if="{{userList.length > 0}}">
        <view class="item-cell" wx:for="{{userList}}" bindtap="goChat" data-cid="{{item._id}}" data-openids="{{item.users}}" wx:key="{{item.id}}">
          <block wx:for="{{item.users}}" wx:for-item="user">
            <view class="head" wx:if="{{user.openid != me.openid}}">
              <image src="{{host}}/users/avatorUrl/{{user.openid}}" />
            </view>
          </block>
          <view class="flex-full">
            <view class="display-flex">
              <view class="flex-full display-flex">
                <block wx:for="{{item.users}}" wx:for-item="user">
                <text  wx:if="{{user.openid != me.openid}}">{{user.nickName}}</text>
              </block>
                <block wx:if="{{item.unreadCount > 0}}">
                  <text class="info-tips">{{item.unreadCount}}</text>
                </block>
              </view>
              <view style="font-size: 22rpx; color: #9092A5;">{{item.date}}</view>
            </view>
            <view class="messge">{{item.lastMessage.type == 1 ? item.lastMessage.msg : '图片消息'}}</view>
          </view>
        </view>
      </block>
      <block wx:else>
        <view class="no-data">
          你还没开始聊天哦～
        </view>
      </block>
    </view>
  </view>

  <base-dialog showDialog="{{showDialog}}"
    title="聊天次数已达上限"
    descText="缘分聊天次数已达上限，开通或升级会员后进行更多缘分聊天"
    bind:closeDialog="closeDialog" />
</view>