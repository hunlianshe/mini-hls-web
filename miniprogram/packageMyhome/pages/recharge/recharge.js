"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Api = require("../../../service/api.service");
const utils = require("../../../utils/utils");
const app = getApp();
Page({
    data: {
        userInfo: {},
        hasUserInfo: false,
        canIUse: wx.canIUse("button.open-type.getUserInfo"),
        smsDisable: false,
        smsTime: 59,
        phone: "",
        submitDisable: false,
        totalMoney: 0,
    },
    onLoad() {
        console.log(`userinfo: `, app.globalData.userInfo);
        const userInfo = wx.getStorageSync("userInfo");
        this.setData({
            userInfo: app.globalData.userInfo,
            totalMoney: userInfo.coin,
            hasUserInfo: true,
        });
    },
    bindPhoneInput(e) {
        this.setData({
            phone: e.detail.value,
        });
    },
    getPhoneCode() {
        const { phone } = this.data;
        if (!utils.validateEmpty(phone, "请输入手机号")) {
            return false;
        }
    },
    goRegister() {
        wx.navigateTo({
            url: "../registerphone/registerphone",
        });
    },
    goHome() {
        wx.navigateTo({
            url: "../home/home",
        });
    },
    getUserInfo(e) {
        app.globalData.userInfo = e.detail.userInfo;
        this.setData({
            userInfo: e.detail.userInfo,
            hasUserInfo: true,
        });
        this.IsFirstTime() ? this.goRegister() : this.goHome();
    },
    IsFirstTime() {
        return false;
    },
    jumpOver() {
        wx.navigateTo({
            url: "../home/home",
        });
    },
    next() {
        wx.navigateTo({
            url: "../matching/matching",
        });
    },
    formSubmit(e) {
        this.setData({
            submitDisable: true,
        });
        const params = e.detail.value;
        if (!utils.validateEmpty(params.money, "请输入充值金额")) {
            this.setData({
                submitDisable: false,
            });
            return false;
        }
        if (!utils.validateMoney(params.money, "请输入小数点保留2位的金额")) {
            this.setData({
                submitDisable: false,
            });
            return false;
        }
        Api.rechargeMoney(Object.assign({}, params, { money: +params.money })).then((result) => {
            console.log(`recharge money request:`, result);
            this.setData({
                submitDisable: true,
            });
            this.callWxForPay(result.data);
        });
    },
    callWxForPay(data) {
        const _this = this;
        wx.requestPayment({
            timeStamp: data.timeStamp,
            nonceStr: data.nonceStr,
            package: "prepay_id=" + data.prepayId,
            signType: "MD5",
            paySign: data.paySign,
            success(res) {
                console.log(`付款成功: `, res);
            },
            fail(res) {
                console.log(`付款失败: `, res);
            },
            complete(res) {
                console.log(`付款结束complete: `, res);
                Api.checkOrderStatus(data.orderNum).then((result) => {
                    if (result && result.code === 200) {
                        console.log(`check order result`);
                        utils.showModelAction("支付成功", () => {
                            wx.navigateBack({
                                delta: 1,
                            });
                        });
                        _this.setData({
                            submitDisable: false,
                        });
                    }
                    else {
                        _this.setData({
                            submitDisable: false,
                        });
                        utils.showModal("支付失败", result.message);
                    }
                });
            },
        });
    },
    formReset() { },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVjaGFyZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZWNoYXJnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG9EQUFvRDtBQUNwRCw4Q0FBOEM7QUFHOUMsTUFBTSxHQUFHLEdBQUcsTUFBTSxFQUFVLENBQUM7QUFFN0IsSUFBSSxDQUFDO0lBQ0gsSUFBSSxFQUFFO1FBQ0osUUFBUSxFQUFFLEVBQUU7UUFDWixXQUFXLEVBQUUsS0FBSztRQUNsQixPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQztRQUNuRCxVQUFVLEVBQUUsS0FBSztRQUNqQixPQUFPLEVBQUUsRUFBRTtRQUNYLEtBQUssRUFBRSxFQUFFO1FBQ1QsYUFBYSxFQUFFLEtBQUs7UUFDcEIsVUFBVSxFQUFFLENBQUM7S0FDZDtJQUVELE1BQU07UUFDSixPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ25ELE1BQU0sUUFBUSxHQUFRLEVBQUUsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDcEQsSUFBSSxDQUFDLE9BQVEsQ0FBQztZQUNaLFFBQVEsRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLFFBQVE7WUFDakMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxJQUFJO1lBQ3pCLFdBQVcsRUFBRSxJQUFJO1NBQ2xCLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxjQUFjLENBQUMsQ0FBTTtRQUNuQixJQUFJLENBQUMsT0FBUSxDQUFDO1lBQ1osS0FBSyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSztTQUN0QixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsWUFBWTtRQUNWLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQzVCLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsRUFB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QU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQzdCLENBQUM7WUFDRCxRQUFRLENBQUMsR0FBRztnQkFDVixPQUFPLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUVuQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQVcsRUFBRSxFQUFFO29CQUN2RCxJQUFJLE1BQU0sSUFBSSxNQUFNLENBQUMsSUFBSSxLQUFLLEdBQUcsRUFBRTt3QkFDakMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO3dCQUtsQyxLQUFLLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUU7NEJBQ2pDLEVBQUUsQ0FBQyxZQUFZLENBQUM7Z0NBQ2QsS0FBSyxFQUFFLENBQUM7NkJBQ1QsQ0FBQyxDQUFDO3dCQUNMLENBQUMsQ0FBQyxDQUFDO3dCQUNILEtBQUssQ0FBQyxPQUFRLENBQUM7NEJBQ2IsYUFBYSxFQUFFLEtBQUs7eUJBQ3JCLENBQUMsQ0FBQztxQkFDSjt5QkFBTTt3QkFDTCxLQUFLLENBQUMsT0FBUSxDQUFDOzRCQUNiLGFBQWEsRUFBRSxLQUFLO3lCQUNyQixDQUFDLENBQUM7d0JBQ0gsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO3FCQUN6QztnQkFDSCxDQUFDLENBQUMsQ0FBQztZQUNMLENBQUM7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsU0FBUyxLQUFVLENBQUM7Q0FDckIsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQXBpIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlL2FwaS5zZXJ2aWNlXCI7XG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvdXRpbHNcIjtcblxuaW1wb3J0IHsgSU15QXBwIH0gZnJvbSBcIi4uLy4uLy4uL2FwcFwiO1xuY29uc3QgYXBwID0gZ2V0QXBwPElNeUFwcD4oKTtcblxuUGFnZSh7XG4gIGRhdGE6IHtcbiAgICB1c2VySW5mbzoge30sXG4gICAgaGFzVXNlckluZm86IGZhbHNlLFxuICAgIGNhbklVc2U6IHd4LmNhbklVc2UoXCJidXR0b24ub3Blbi10eXBlLmdldFVzZXJJbmZvXCIpLFxuICAgIHNtc0Rpc2FibGU6IGZhbHNlLFxuICAgIHNtc1RpbWU6IDU5LFxuICAgIHBob25lOiBcIlwiLFxuICAgIHN1Ym1pdERpc2FibGU6IGZhbHNlLFxuICAgIHRvdGFsTW9uZXk6IDAsXG4gIH0sXG5cbiAgb25Mb2FkKCkge1xuICAgIGNvbnNvbGUubG9nKGB1c2VyaW5mbzogYCwgYXBwLmdsb2JhbERhdGEudXNlckluZm8pO1xuICAgIGNvbnN0IHVzZXJJbmZvOiBhbnkgPSB3eC5nZXRTdG9yYWdlU3luYyhcInVzZXJJbmZvXCIpO1xuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgdXNlckluZm86IGFwcC5nbG9iYWxEYXRhLnVzZXJJbmZvLFxuICAgICAgdG90YWxNb25leTogdXNlckluZm8uY29pbixcbiAgICAgIGhhc1VzZXJJbmZvOiB0cnVlLFxuICAgIH0pO1xuICB9LFxuXG4gIGJpbmRQaG9uZUlucHV0KGU6IGFueSkge1xuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgcGhvbmU6IGUuZGV0YWlsLnZhbHVlLFxuICAgIH0pO1xuICB9LFxuXG4gIGdldFBob25lQ29kZSgpOiBhbnkge1xuICAgIGNvbnN0IHsgcGhvbmUgfSA9IHRoaXMuZGF0YTtcbiAgICBpZiAoIXV0aWxzLnZhbGlkYXRlRW1wdHkocGhvbmUsIFwi6K+36L6T5YWl5omL5py65Y+3XCIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LFxuXG4gIGdvUmVnaXN0ZXIoKTogdm9pZCB7XG4gICAgd3gubmF2aWdhdGVUbyh7XG4gICAgICB1cmw6IFwiLi4vcmVnaXN0ZXJwaG9uZS9yZWdpc3RlcnBob25lXCIsXG4gICAgfSk7XG4gIH0sXG5cbiAgZ29Ib21lKCk6IHZvaWQge1xuICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgdXJsOiBcIi4uL2hvbWUvaG9tZVwiLFxuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiDvvIjmnKrmjojmnYPvvInmiYvliqjllKTotbfmjojmnYNcbiAgICovXG4gIGdldFVzZXJJbmZvKGU6IGFueSkge1xuICAgIGFwcC5nbG9iYWxEYXRhLnVzZXJJbmZvID0gZS5kZXRhaWwudXNlckluZm87XG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICB1c2VySW5mbzogZS5kZXRhaWwudXNlckluZm8sXG4gICAgICBoYXNVc2VySW5mbzogdHJ1ZSxcbiAgICB9KTtcbiAgICB0aGlzLklzRmlyc3RUaW1lKCkgPyB0aGlzLmdvUmVnaXN0ZXIoKSA6IHRoaXMuZ29Ib21lKCk7XG4gIH0sXG5cbiAgLyoqIOaYr+WQpummluasoSAqL1xuICBJc0ZpcnN0VGltZSgpOiBCb29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG5cbiAganVtcE92ZXIoKTogdm9pZCB7XG4gICAgd3gubmF2aWdhdGVUbyh7XG4gICAgICB1cmw6IFwiLi4vaG9tZS9ob21lXCIsXG4gICAgfSk7XG4gIH0sXG5cbiAgbmV4dCgpOiB2b2lkIHtcbiAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgIHVybDogXCIuLi9tYXRjaGluZy9tYXRjaGluZ1wiLFxuICAgIH0pO1xuICB9LFxuXG4gIGZvcm1TdWJtaXQoZTogYW55KTogYW55IHtcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIHN1Ym1pdERpc2FibGU6IHRydWUsXG4gICAgfSk7XG4gICAgY29uc3QgcGFyYW1zID0gZS5kZXRhaWwudmFsdWU7XG4gICAgaWYgKCF1dGlscy52YWxpZGF0ZUVtcHR5KHBhcmFtcy5tb25leSwgXCLor7fovpPlhaXlhYXlgLzph5Hpop1cIikpIHtcbiAgICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgICBzdWJtaXREaXNhYmxlOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIXV0aWxzLnZhbGlkYXRlTW9uZXkocGFyYW1zLm1vbmV5LCBcIuivt+i+k+WFpeWwj+aVsOeCueS/neeVmTLkvY3nmoTph5Hpop1cIikpIHtcbiAgICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgICBzdWJtaXREaXNhYmxlOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBUT0RPXG4gICAgQXBpLnJlY2hhcmdlTW9uZXkoe1xuICAgICAgLi4ucGFyYW1zLFxuICAgICAgbW9uZXk6ICtwYXJhbXMubW9uZXksXG4gICAgfSkudGhlbigocmVzdWx0OiBhbnkpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGByZWNoYXJnZSBtb25leSByZXF1ZXN0OmAsIHJlc3VsdCk7XG4gICAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgICAgc3VibWl0RGlzYWJsZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5jYWxsV3hGb3JQYXkocmVzdWx0LmRhdGEpO1xuICAgICAgLy8gaWYgKHJlc3VsdC5jb2RlID09PSAyMDApIHtcbiAgICAgIC8vICAgd3gubmF2aWdhdGVUbyh7XG4gICAgICAvLyAgICAgdXJsOiAnLi4vbWF0Y2hpbmcvbWF0Y2hpbmcnLFxuICAgICAgLy8gICB9KTtcbiAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAvLyAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgLy8gICAgIHN1Ym1pdERpc2FibGU6IGZhbHNlXG4gICAgICAvLyAgIH0pO1xuICAgICAgLy8gICB1dGlscy5zaG93TW9kYWwocmVzdWx0Lm1lc3NhZ2UpO1xuICAgICAgLy8gfVxuICAgIH0pO1xuICB9LFxuXG4gIGNhbGxXeEZvclBheShkYXRhOiBhbnkpIHtcbiAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgd3gucmVxdWVzdFBheW1lbnQoe1xuICAgICAgdGltZVN0YW1wOiBkYXRhLnRpbWVTdGFtcCxcbiAgICAgIG5vbmNlU3RyOiBkYXRhLm5vbmNlU3RyLFxuICAgICAgLy8gcGFja2FnZTogZGF0YS5wYWNrYWdlLFxuICAgICAgcGFja2FnZTogXCJwcmVwYXlfaWQ9XCIgKyBkYXRhLnByZXBheUlkLFxuICAgICAgc2lnblR5cGU6IFwiTUQ1XCIsXG4gICAgICBwYXlTaWduOiBkYXRhLnBheVNpZ24sXG4gICAgICBzdWNjZXNzKHJlcykge1xuICAgICAgICBjb25zb2xlLmxvZyhg5LuY5qy+5oiQ5YqfOiBgLCByZXMpO1xuICAgICAgfSxcbiAgICAgIGZhaWwocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDku5jmrL7lpLHotKU6IGAsIHJlcyk7XG4gICAgICB9LFxuICAgICAgY29tcGxldGUocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDku5jmrL7nu5PmnZ9jb21wbGV0ZTogYCwgcmVzKTtcbiAgICAgICAgLy8g5LuY5qy+5oiQ5Yqf55u05o6l5pu05pawXG4gICAgICAgIEFwaS5jaGVja09yZGVyU3RhdHVzKGRhdGEub3JkZXJOdW0pLnRoZW4oKHJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQuY29kZSA9PT0gMjAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgY2hlY2sgb3JkZXIgcmVzdWx0YCk7XG4gICAgICAgICAgICAvLyDot7PovazorqLljZXor6bmg4VcbiAgICAgICAgICAgIC8vIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgICAgICAgLy8gICB1cmw6IGAuLi8uLi8uLi9wYWdlcy9teUhvbWUvbXlIb21lYCxcbiAgICAgICAgICAgIC8vIH0pXG4gICAgICAgICAgICB1dGlscy5zaG93TW9kZWxBY3Rpb24oXCLmlK/ku5jmiJDlip9cIiwgKCkgPT4ge1xuICAgICAgICAgICAgICB3eC5uYXZpZ2F0ZUJhY2soe1xuICAgICAgICAgICAgICAgIGRlbHRhOiAxLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgX3RoaXMuc2V0RGF0YSEoe1xuICAgICAgICAgICAgICBzdWJtaXREaXNhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5zZXREYXRhISh7XG4gICAgICAgICAgICAgIHN1Ym1pdERpc2FibGU6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB1dGlscy5zaG93TW9kYWwoXCLmlK/ku5jlpLHotKVcIiwgcmVzdWx0Lm1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9LFxuXG4gIGZvcm1SZXNldCgpOiB2b2lkIHt9LFxufSk7XG4iXX0=