"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const io = require('../lib/weapp.socket.io.js');
const config_1 = require("../config");
let token = wx.getStorageSync('user').token;
const socket = io(config_1.default.socket, {
    path: '',
    query: {
        token,
    }
});
socket.on('connect', function () {
    console.log('connect....');
});
const sendMessage = (msg) => {
    console.log('send message', msg);
    if (msg.msg.trim() !== '') {
        console.log("消息发送出去了吗");
        socket.emit('privateChat', msg);
    }
};
exports.sendMessage = sendMessage;
const getSocket = () => {
    return socket;
};
exports.getSocket = getSocket;
socket.on("privateChat", (result) => {
    console.log("tim received msg ", result);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ja2V0LnNlcnZpY2UyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic29ja2V0LnNlcnZpY2UyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsTUFBTyxFQUFFLEdBQUcsT0FBTyxDQUFDLDJCQUEyQixDQUFDLENBQUM7QUFDakQsc0NBQStCO0FBQy9CLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDO0FBRTVDLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQyxnQkFBTSxDQUFDLE1BQU0sRUFBRTtJQUM3QixJQUFJLEVBQUMsRUFBRTtJQUNQLEtBQUssRUFBRTtRQUNMLEtBQUs7S0FDTjtDQUNGLENBQUMsQ0FBQTtBQUVKLE1BQU0sQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFO0lBQ2pCLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUE7QUFDNUIsQ0FBQyxDQUFDLENBQUM7QUFHTCxNQUFNLFdBQVcsR0FBRyxDQUFDLEdBSXBCLEVBQUUsRUFBRTtJQUNELE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2hDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUU7UUFDekIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUN2QixNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxHQUFHLENBQUMsQ0FBQztLQUNqQztBQUNMLENBQUMsQ0FBQztBQVlFLGtDQUFXO0FBVGYsTUFBTSxTQUFTLEdBQUcsR0FBRyxFQUFFO0lBQ25CLE9BQU8sTUFBTSxDQUFBO0FBQ2pCLENBQUMsQ0FBQztBQVFFLDhCQUFTO0FBTmIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUMsQ0FBQyxNQUFVLEVBQUUsRUFBRTtJQUNyQyxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixFQUFDLE1BQU0sQ0FBQyxDQUFBO0FBQ3pDLENBQUMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gY29uc3QgaW8gPSByZXF1aXJlKCcuLi8uLi90eXBpbmdzL3dlYXBwLnNvY2tldC5pby5qcycpXG4vLyBpbXBvcnQgaW8gZnJvbSAnJztcbmNvbnN0ICBpbyA9IHJlcXVpcmUoJy4uL2xpYi93ZWFwcC5zb2NrZXQuaW8uanMnKTtcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnJztcbmxldCB0b2tlbiA9IHd4LmdldFN0b3JhZ2VTeW5jKCd1c2VyJykudG9rZW47XG5cbmNvbnN0IHNvY2tldCA9IGlvKGNvbmZpZy5zb2NrZXQsIHtcbiAgICBwYXRoOicnLFxuICAgIHF1ZXJ5OiB7XG4gICAgICB0b2tlbixcbiAgICB9XG4gIH0pXG5cbnNvY2tldC5vbignY29ubmVjdCcsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKCdjb25uZWN0Li4uLicpXG4gIH0pO1xuICBcblxuY29uc3Qgc2VuZE1lc3NhZ2UgPSAobXNnOiB7XG4gICAgY2lkOiBzdHJpbmdcbiAgICB0eXBlOiBudW1iZXJcbiAgICBtc2c6IHN0cmluZ1xufSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdzZW5kIG1lc3NhZ2UnLG1zZyk7XG4gICAgaWYgKG1zZy5tc2cudHJpbSgpICE9PSAnJykge1xuICAgICAgY29uc29sZS5sb2coXCLmtojmga/lj5HpgIHlh7rljrvkuoblkJdcIilcbiAgICAgIHNvY2tldC5lbWl0KCdwcml2YXRlQ2hhdCcsIG1zZyk7XG4gICAgfVxufTtcblxuXG5jb25zdCBnZXRTb2NrZXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHNvY2tldFxufTtcblxuc29ja2V0Lm9uKFwicHJpdmF0ZUNoYXRcIiwocmVzdWx0OmFueSkgPT4ge1xuICBjb25zb2xlLmxvZyhcInRpbSByZWNlaXZlZCBtc2cgXCIscmVzdWx0KVxufSlcblxuZXhwb3J0IHtcbiAgICBzZW5kTWVzc2FnZSxcbiAgICBnZXRTb2NrZXRcbn0iXX0=