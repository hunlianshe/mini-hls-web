"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Api = require("./api.service");
const startSingleChatSession = (openid, success = () => { }, fail = () => { }) => {
    Api.startChatSession({
        userIds: [openid],
    }).then((result) => {
        if (result.code == 200) {
            console.log(`start chat session result`, result.data);
            success();
            wx.navigateTo({
                url: `../chat/chat?openid=${openid}&cid=${result.data._id}`,
            });
        }
        else {
            fail();
        }
    });
};
exports.startSingleChatSession = startSingleChatSession;
const updateMsgToReadStatus = (cid) => {
    Api.readMsg(cid).then((res) => {
        if (res.code == 200) {
            console.log(`read msg`, res);
        }
    });
};
exports.updateMsgToReadStatus = updateMsgToReadStatus;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhdC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY2hhdC5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEscUNBQXFDO0FBRXJDLE1BQU0sc0JBQXNCLEdBQUcsQ0FDN0IsTUFBYyxFQUNkLE9BQU8sR0FBRyxHQUFHLEVBQUUsR0FBRSxDQUFDLEVBQ2xCLElBQUksR0FBRyxHQUFHLEVBQUUsR0FBRSxDQUFDLEVBQ2YsRUFBRTtJQUNGLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQztRQUNuQixPQUFPLEVBQUUsQ0FBQyxNQUFNLENBQUM7S0FDbEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQVcsRUFBRSxFQUFFO1FBQ3RCLElBQUksTUFBTSxDQUFDLElBQUksSUFBSSxHQUFHLEVBQUU7WUFDdEIsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDdEQsT0FBTyxFQUFFLENBQUM7WUFDVixFQUFFLENBQUMsVUFBVSxDQUFDO2dCQUNaLEdBQUcsRUFBRSx1QkFBdUIsTUFBTSxRQUFRLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFO2FBQzVELENBQUMsQ0FBQztTQUNKO2FBQU07WUFDTCxJQUFJLEVBQUUsQ0FBQztTQUNSO0lBQ0gsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUM7QUFXTyx3REFBc0I7QUFSL0IsTUFBTSxxQkFBcUIsR0FBRyxDQUFDLEdBQVEsRUFBRSxFQUFFO0lBQ3pDLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBUSxFQUFFLEVBQUU7UUFDakMsSUFBSSxHQUFHLENBQUMsSUFBSSxJQUFJLEdBQUcsRUFBRTtZQUNuQixPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsQ0FBQztTQUM5QjtJQUNILENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFBO0FBRWdDLHNEQUFxQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEFwaSBmcm9tIFwiLi9hcGkuc2VydmljZVwiO1xuXG5jb25zdCBzdGFydFNpbmdsZUNoYXRTZXNzaW9uID0gKFxuICBvcGVuaWQ6IHN0cmluZyxcbiAgc3VjY2VzcyA9ICgpID0+IHt9LFxuICBmYWlsID0gKCkgPT4ge31cbikgPT4ge1xuICBBcGkuc3RhcnRDaGF0U2Vzc2lvbih7XG4gICAgdXNlcklkczogW29wZW5pZF0sXG4gIH0pLnRoZW4oKHJlc3VsdDogYW55KSA9PiB7XG4gICAgaWYgKHJlc3VsdC5jb2RlID09IDIwMCkge1xuICAgICAgY29uc29sZS5sb2coYHN0YXJ0IGNoYXQgc2Vzc2lvbiByZXN1bHRgLCByZXN1bHQuZGF0YSk7XG4gICAgICBzdWNjZXNzKCk7XG4gICAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgICAgdXJsOiBgLi4vY2hhdC9jaGF0P29wZW5pZD0ke29wZW5pZH0mY2lkPSR7cmVzdWx0LmRhdGEuX2lkfWAsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmFpbCgpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5cbmNvbnN0IHVwZGF0ZU1zZ1RvUmVhZFN0YXR1cyA9IChjaWQ6IGFueSkgPT4ge1xuICBBcGkucmVhZE1zZyhjaWQpLnRoZW4oKHJlczogYW55KSA9PiB7XG4gICAgaWYgKHJlcy5jb2RlID09IDIwMCkge1xuICAgICAgY29uc29sZS5sb2coYHJlYWQgbXNnYCwgcmVzKTtcbiAgICB9IFxuICB9KVxufVxuXG5leHBvcnQgeyBzdGFydFNpbmdsZUNoYXRTZXNzaW9uLCB1cGRhdGVNc2dUb1JlYWRTdGF0dXMgfTtcbiJdfQ==